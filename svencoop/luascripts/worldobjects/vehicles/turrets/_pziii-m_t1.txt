Class_name = "CTurret"
object_name = "_PzIII-M_T1"

AimingRay=true

[COCKPIT_LIMITS]
x= -0.12, 0.12
y= -0.2, 0.08
z= -0.1, 0.1
[END]

[OPEN_COCKPIT_LIMITS]
x= -0.5, 0.5
y= -0.2, 0.2
z= -0.5, 0.5
[END]

VisualImage=0,"graphics\Vehicles\_PzIII-M\_PzIII-M-C2-low.mgm",true
VisualImage=1,"graphics\Vehicles\_PzIII-M\_PzIII-M-C2.mgm",8
CollisionBody="graphics\Vehicles\_PzIII-M\_PzIII-M-C2.col"
HitBody="graphics\Vehicles\_PzIII-M\_PzIII-M-C2_DetColl.col"
KeepNetworkImages=true	//high-poly cockpit will be visible from other workstations of the object

//VisualImage=ID,model_or_effect,cast_shadows[,debris_effects]
//ID:					INT:	0 - visible everywhere, 1 - visible inside, 2 - visible outside
//model_or_effect:		STRING:	path to model file (mgm) of effect file (epl)
//cast_shadows: 		BOOL/INT:	cast shadows from object or not (cast_shadows=Attr1+Attr2+...+AttrN)
//						VIF_CASTSHADOWS=1,
//						VIF_BLENDMASKLAST=2,
//						VIF_ALWAYSONTOP=4,
//						VIF_FLATAMBIENT=8,
//[,debris_effects]:	BOOL:	optional parameter, show effects on object debris or not

ImageAttr=1	//IA_NOCLIP
//	IA_DEFAULT=0,
//	IA_NOCLIP=1,
//	IA_NOCLIP_ANIM=2,
//	IA_NOROTINTERPOLATION=4,
//	IA_NOMINZ=8,
//	IA_NOMINPIXELS=16,
//	IA_NOPOSINTERPOLATION=32,
//	IA_CLOSEVIEWARG=64,
//	IA_ALWAYSVISIBLE=128,
//	IA_SCALEARG=256,
//	ImageAttr=Attr1+Attr2+...+AttrN

TransparentCockpit=false	// If false - Attached bot will be not rendered if cockpit hatch is closed (default =true)

//LocalPosRot=true
//ConvexAnimThreshold=0.000001	// Дискретность анимаций

VisualRadius=5.0

mp_site=true

CopyPosAttachID=1	//Copy orientation from other parent's object, on AttachID==1

[attach=0]
	object = "LuaScripts/WorldObjects/Bots/BotTankPz3M_Commander.txt"
	position = 0,0,0
	convex="bot_pos",false	//false: Attach object relative to "bot_pos" convex (not absolute)
[end]

TargetingScript = "LuaScripts/WorldObjects/Ballistics/Projectiles/SHELL_RUS_76_AP.bin"

SoundScript="LuaScripts/Sound/Vehicles/PzIII-M_Turret_T1.cfg"

Script="LuaScripts\ObjectScripts\Vehicles\_PzIII-M_T1.sc"

//FetchArgVal= cockpit_arg_num, transfer_number, default_cockpit_arg_val, interpolation_type (clamp - shortest on line scale, wrap - shortest on cyclic scale)

FlarePos= -0.02, 0.70, -0.49
FlareDir= 0.5, 1.0, -0.5
FlarePath= "LuaScripts/WorldObjects/Ballistics/Flare.txt"

SightPos = 0.0, 1.3, 0.0
PositionChangeTime = 0.5
StandDuration = 1.0
SitDuration = 1.0
PreEjectDuration = 1.0
ReloadDelay = 0.3
FreezeOnReload = false
AutoRecharge = true

BotRotaionValueZ = 0	// not used for tank
LegsParameter = 0 // not used for tank

BotMaxSecondAngle = 25.0 // not used for tank
BotMinSecondAngle = -5.0 // not used for tank

BotMaxFirstAngle  = 10.0 // not used for tank
BotMinFirstAngle  = -10.0  // not used for tank

FirstToSecondInterp = 0.0 // not used for tank

GunSightDistanceArg = 9544
GunSightYawArg = 9546
GunSightTypeArg = 9545

// ограничения сектора обстрела, что бы ИИ не пытался наводится в указанные убласти
//SectorLimits =  -45.0,  +45.0,  25.0, 90.0
//SectorLimits =	-180.0, -140.0, -15.0, 90.0
//SectorLimits =	 140.0,  180.0, -15.0, 90.0

// Damage

//BeamHitZeroArmor=true //при попадании бронебойного снаряда игнорировать параметры m_fArmor и m_fArmorSides (для случая, когда бронебойная броня сделана бронеплитами в колижене)
//LifeRate=5000
//LifeRateFrag=5000 
//Firing=0.005
//Armor=82
//[ArmorBox]			// Если данный блок есть, то броня задана по сторонам, если блока нет, то используется общий параметр Armor=
//	FovH=90			// Полный угол горизонтального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
//	FovV=90			// Полный угол вертикального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
//					// Остальные 5 раструбов определяются автоматически по центральной симметрии относительно переднего
//	ArmorFront=100
//	ArmorBack=82
//	ArmorTop=26
//	ArmorBottom=26
//	ArmorRight=82
//	ArmorLeft=82
//[end]

//maxDamageArgValue=0.98
//DamageArg=5000
damageablePart=""

IsCritical=false	//true - обнуление лайфа модуля обнулит лайф всего объекта
LifeK=200			//весовой коэфициент влияния лайфа модуля на лайф всего объекта (все к-ты нормируются автоматически)

KillChildObjectsOnParentDeath = true

SphereHitProtection=30	//Броневая защита стрелка от осколков при закрытой кабине

[SphereProtectionBoxOpen]	// Если данный блок есть, то броня пилота от осколков задана по сторонам, если блока нет, то используется общий параметр SphereHitProtection=
	FovH=90				// Полный угол горизонтального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
	FovV=60					// Полный угол вертикального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
							// Остальные 5 раструбов определяются автоматически по центральной симметрии относительно переднего
	ArmorFront=0
	ArmorBack=0
	ArmorTop=0
	ArmorBottom=15
	ArmorRight=0
	ArmorLeft=0
[end]

[SphereProtectionBoxClose]	// Если данный блок есть, то броня пилота от осколков задана по сторонам, если блока нет, то используется общий параметр SphereHitProtection=
	FovH=90					// Полный угол горизонтального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
	FovV=150				// Полный угол вертикального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
							// Остальные 5 раструбов определяются автоматически по центральной симметрии относительно переднего
	ArmorFront=81			// Для ОФ угол наклона цилиндрических частей берется 30°
	ArmorBack=30
	ArmorTop=15
	ArmorBottom=15
	ArmorRight=33
	ArmorLeft=33
[end]

////	Energy loss for bullet travel through HitBody convices	////

energyloss="",true,1,200	// Потеря энергии пули при попадании, true - проверка на входе и выходе в колижн-бокс, первое эквивалентная броня на входе и выходе, второе джоулей на каждый метр пути внутри колижена

//Damageable parts
energyloss="#turret2012_coll",false,0,1	//Dummy collision for visual damage
energyloss="sight_1050",false,10,1		//Commander turret armoured glass, 75mm, K=0.1333
energyloss="sight_1051",false,10,1		//Commander turret armoured glass, 75mm, K=0.1333
energyloss="sight_1052",false,10,1		//Commander turret armoured glass, 75mm, K=0.1333
energyloss="sight_1053",false,10,1		//Commander turret armoured glass, 75mm, K=0.1333
energyloss="sight_1054",false,10,1		//Commander turret armoured glass, 75mm, K=0.1333

//Armour
energyloss="com_tower_1",false,26,1		//Commander turret armouring, 30mm, K=0.85
energyloss="com_tower_2",false,26,1		//Commander turret armouring, 30mm, K=0.85
energyloss="com_tower_3",false,26,1		//Commander turret armouring, 30mm, K=0.85
energyloss="com_tower_4",false,26,1		//Commander turret armouring, 30mm, K=0.85
energyloss="com_tower_1a",false,38,1	//Commander turret armouring, 45mm, K=0.85
energyloss="com_tower_2a",false,38,1	//Commander turret armouring, 45mm, K=0.85
energyloss="com_tower_3a",false,38,1	//Commander turret armouring, 45mm, K=0.85
energyloss="com_tower_4a",false,38,1	//Commander turret armouring, 45mm, K=0.85
energyloss="com_tower_5",false,10,1		//Commander turret armouring, 10mm, K=1.0
energyloss="com_tower_6",false,10,1		//Commander turret armouring, 10mm, K=1.0

[ReflectArmorBox]	// Для расчета рикошета там, где внешний колижн energyloss=0,1. Если данный блок есть, то броня задана по сторонам, если блока нет, то используется общий параметр Armor=
	FovH=90			// Полный угол горизонтального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
	FovV=90			// Полный угол вертикального раствора пирамидального раструба углов нормали к колижену, по которому грань колижена определяется, как ArmorFront
					// Остальные 5 раструбов определяются автоматически по центральной симметрии относительно переднего
	ArmorFront=38
	ArmorBack=38
	ArmorTop=10
	ArmorBottom=10
	ArmorRight=38
	ArmorLeft=38
[end]

/////Functional Damage Groups

[DGroup=Body]
	IsCritical=true
	LifeK=200
	convex="#turret2012_coll", 38,20000,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=90
		FovV=90
		ArmorFront=38
		ArmorBack=38
		ArmorTop=10
		ArmorBottom=15
		ArmorRight=38
		ArmorLeft=38
	[end]
	LifeRateFrag=20000
	DamageArg=5001
	MinValidLife=0.02
	Explosion="LuaScripts\WorldObjects\explosions\Detonation\VehicleComTwrNoDmg.txt"
	RepairSpeed=0.016667	// (1 минута)
	RepairSource=4			// Починка только в радиусе "чинилки"
	InstantRepair=false
[end]

//End of Functional Damage Groups
//Graphical Damage Groups:

[DGroup=CornerCommon]
	IsCritical=false
	LifeK=50
	convex="#turret2012_coll",10,15000,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=90
		FovV=90
		ArmorFront=10
		ArmorBack=10
		ArmorTop=10
		ArmorBottom=50
		ArmorRight=10
		ArmorLeft=10
	[end]
	LifeRateFrag=30000
	DamageArg=2012
	DamageMaxVal=0.98
	RepairSpeed=0.008333	// (2 минуты, при стандартном ускорении "чинилки" =4 это будет 0.5 минуты)
	RepairSource=4			// Починка только в радиусе "чинилки"
	InstantRepair=false
[end]

[DGroup=VisorCom_1]
	IsCritical=false
	LifeK=2
	convex="sight_1050",5,500,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=60
		FovV=15
		ArmorFront=5
		ArmorBack=38
		ArmorTop=10
		ArmorBottom=15
		ArmorRight=38
		ArmorLeft=38
	[end]
	LifeRateFrag=5000
	DamageArg=1050
	RepairSpeed=0.033333	// (0.5 минуты)
	RepairSource=0
	InstantRepair=true
	GuiParam=11, true,true,true
[end]
[DGroup=VisorCom_2]
	IsCritical=false
	LifeK=2
	convex="sight_1051",5,500,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=120
		FovV=15
		ArmorFront=38
		ArmorBack=38
		ArmorTop=10
		ArmorBottom=15
		ArmorRight=38
		ArmorLeft=5
	[end]
	LifeRateFrag=5000
	DamageArg=1051
	RepairSpeed=0.033333	// (0.5 минуты)
	RepairSource=0
	InstantRepair=true
	RepairDependsOn="VisorCom_1", 0.95
	GuiParam=11, true,true,true
[end]
[DGroup=VisorCom_3]
	IsCritical=false
	LifeK=2
	convex="sight_1052",5,500,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=90
		FovV=15
		ArmorFront=38
		ArmorBack=5
		ArmorTop=10
		ArmorBottom=15
		ArmorRight=38
		ArmorLeft=5
	[end]
	LifeRateFrag=5000
	DamageArg=1052
	RepairSpeed=0.033333	// (0.5 минуты)
	RepairSource=0
	InstantRepair=true
	RepairDependsOn="VisorCom_2", 0.95
	GuiParam=11, true,true,true
[end]
[DGroup=VisorCom_4]
	IsCritical=false
	LifeK=2
	convex="sight_1053",5,500,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=90
		FovV=15
		ArmorFront=38
		ArmorBack=5
		ArmorTop=10
		ArmorBottom=15
		ArmorRight=5
		ArmorLeft=38
	[end]
	LifeRateFrag=5000
	DamageArg=1053
	RepairSpeed=0.033333	// (0.5 минуты)
	RepairSource=0
	InstantRepair=true
	RepairDependsOn="VisorCom_3", 0.95
	GuiParam=11, true,true,true
[end]
[DGroup=VisorCom_5]
	IsCritical=false
	LifeK=2
	convex="sight_1054",5,500,"MT_ARMOR"
	[SphereHitArmorBox]
		FovH=120
		FovV=15
		ArmorFront=38
		ArmorBack=38
		ArmorTop=10
		ArmorBottom=15
		ArmorRight=5
		ArmorLeft=38
	[end]
	LifeRateFrag=5000
	DamageArg=1054
	RepairSpeed=0.033333	// (0.5 минуты)
	RepairSource=0
	InstantRepair=true
	RepairDependsOn="VisorCom_4", 0.95
	GuiParam=11, true,true,true
[end]

[trashspawner]
	[spawn]
		solidtrash="LuaScripts\WorldObjects\Trash\TankTrash\_PzIII-M-trash_comtwr.txt"
		exp_SpawnIf="ArgVal(5001)>0.998"
		Position=-0.54,0.71,0.0
		SpawnDir=-3,3,-3
	[end]
[end]

//End of Graphical Damage Groups

[Entrance]
	EntrancePos= 0.0, -0.77, 4.2
	EntranceRot= 0,90,0
	JumpDir= 0,0,0
[end]

ColimatorHideArg=9547

DefaultGun=0	//default=-1, all of the guns are active

ClosedHatch=false // True - люк будет всегда закрытым
ClosedWindow=false  // True - форточка будет всегда закрытой
CanopyOpenByDefault=false
WindowOpenByDefault=true
NoAimingWhenOpened=true  // True - турель не работает при открытом люке
canopytime=4.75	//Время анинации от Arg=0 до Arg=0.95. Требуемое время анимации от Arg=0.1 до Arg=0.9 определено временем анимации персонажа (4 сек), откуда значение параметра 0.95/0.8*4=4.75.
windowtime=1.5

OpenCockpitArg=31
AutoCanopy=false
CockpitLightArg=30000,0.35,0.351,0.6
canopyLockSoundMask=2	// 0 bit - canopy unlock, start
						// 1 bit - canopy unlock, end
						// 2 bit - canopy lock, start
						// 3 bit - canopy lock, end

OpenWindowArg=33
AutoWindow=false
WindowLightArg=30010,0.3,0.45,0.6

FlareHatchArg=32
FlareHatchTime=1.0

TechChatCrewRole=5	//Роль для техночата люков (Driver: 1, Gunner: 3, Commander: 5, Machinegunner: 7, Radioman: 9)

SetCockpitArgs=true	// true - автоматическое выставление значений анимаций в систему сетевых команд с указанным флагом сетевой передачи, false - в самолётах это делается в коде или в случае работы объекта только на приём

//CockpitArg= FetchType, CmdID, SubcmdID, ArgNum, ArgValDefault, SmoothingType, SmoothingPower, NetworkFlag
//FetchType=-1: аргумент в объекте не забирается для анимирования
//FetchType=-2: аргумент в объекте забирается для анимирования из самого объекта
//FetchType=-3: аргумент в объекте забирается для анимирования по сетевым командам parent-объекта
//FetchType>=0: аргумент в объекте забирается для анимирования по сетевым командам child-объекта с укзанным Attach ID
//CmdID=[0..999]: ID сетевой команды низкого качества, используемой для передачи значения.
//CmdID=[1000..1999]: ID сетевой команды среднего качества, используемой для передачи значения.
//SubcmdID=[0..3]: ID сетевой подкоманды команды низкого качества.
//SubcmdID=[0..1]: ID сетевой подкоманды команды среднего качества.
//ArgNum: номер аргумента анимации устанавливаемого в/из команды.
//ArgValDefault: дефолтное значение аргумента анимации в случае, если команда не приходила.
//SmoothingType: smooth_clamp - сглаживаение не-круговых анимаций
//SmoothingType: smooth_wrap - сглаживаение круговых анимаций
//SmoothingPower: постоянная времени сглаживания
//NetworkFlag="": отправки команды в сеть нет и нет выставления команды в случае, если SetCockpitArgs=false
//NetworkFlag="low_freq": отправка в сеть целиком команды, содержащей указанный аргумент в случае его изменения, не чаще низкой частоты
//NetworkFlag="med_freq": отправка в сеть целиком команды, содержащей указанный аргумент в случае его изменения, не чаще средней частоты
//NetworkFlag="high_freq": отправка в сеть целиком команды, содержащей указанный аргумент в случае его изменения, не чаще высокой частоты
//NetworkFlag="granted_single": отправка в сеть целиком команды, содержащей указанный аргумент в случае его изменения, с применением гарантированного пакета состояния

CockpitArg = -3, 0000, 0, 60210, 0.0, "smooth_clamp", 0.0, "" // Electric point lights. CommandID, SubCommandID, Arg, DefaultValue, InterpolationType, Smooth, last not used on Fetch
CockpitArg = -3, 0000, 1, 60310, 0.0, "smooth_clamp", 0.0, "" // Electric flood light

[moveDeviator]
  HiFreqAmp = 0.2f
  MaxDeviation = 0.3f
  Periods = 2.1, 0.4;
[end]
accelDirK = 0.3
accelDirSmooth = 0.2
accelSideK = 0.3
accelSideSmooth = 0.2

[moveBotDeviator]
  HiFreqAmp = 0.2f
  MaxDeviation = 0.3f
  Periods = 2.1, 0.4;
[end]
accelBotDirK = 0.2
accelBotDirSmooth = 0.03
accelBotSideK = 0.2
accelBotSideSmooth = 0.03

GunsmokeHatchStart=0.4	//Used by object script